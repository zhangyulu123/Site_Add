<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv = "X-UA-Compatible" content = "IE = edge" charset = "UTF-8"/> 
		<title>SiteAdd</title>
		<link rel = "stylesheet" href = "../src/main/webapp/pages/css/wanma.css"/>
		<link rel = "stylesheet" href = "../src/main/webapp/tools/easyui/themes/default/easyui.css"/>
		<link rel = "stylesheet" href = "../src/main/webapp/tools/easyui/themes/icon.css"/>
		
		<script type = "text/javascript" src = "../src/main/webapp/tools/tssJS/tssJS.all.js"></script>
		
		<script type = "text/javascript" src = "../src/main/webapp/tools/easyui/jquery.min.js"></script>
		<script type = "text/javascript" src = "../src/main/webapp/tools/easyui/jquery.easyui.min.js"></script>
		<script type = "text/javascript" src = "../src/main/webapp/tools/easyui/easyui-lang-zh_CN.js"></script>
		
		<script type = "text/javascript" src = "../src/main/webapp/tools/echarts/echarts-all-2.1.10.js"></script>
		<script type = "text/javascript" src = "../src/main/webapp/more/bi_template/echart.js"></script>
		<script type = "text/javascript" src = "../src/main/webapp/more/bi_template/common.js"></script>
		<script type = "text/javascript" src = "../src/main/webapp/pages/js/common.js"></script>
		<style type = "text/css">
			th span {
				display: block;
			}
		</style>
		<script type = "text/javascript">
			var data;
			var center_to_org = {}, orgid = {};//下拉框数据引用，同时标记分拨id
			var params = {"param1": "2016-4-13", "param2": "浙江分公司", "param3": "-1"};
			
			$(function(){
				
				var DATA_URL = "http://10.9.45.64:8080/tss/data/json/2212";
				var method = "POST";
				
				tssJS.ajax({
					url: DATA_URL,
					params: params,
					method: method,
					type: "json",
					waiting: true,
					ondata: function(){
						data =  this.getResponseJSON();
						showtree(data);
						combosel();
						sel();
						//showCanvas(data);
						showCanvas2(data);
					}
				});
			});
			
			//下拉框切换
			function changesel(){
				var sel = $("#toggle option:selected").val();
				if(sel == "1"){
				showCanvas1(data);
				}else{
					showCanvas2(data);
				};	
			};
			
						
			//完成率计算
			function rate_cal(add, target){

				if((target != 0) && (target != null) && (add != null)){
					return  Math.round(add/target*10000)/100; //保留两位小数
				}else{
					return ;	
				}
			};
			
			//门店新增表明细、完成率明细
			function showtree(data){
				//分公司、分拨id构造，用于层级关系
				var orglist = [], centerlist = [], monthlist = [];
				var centerid = {}, monthid = {}; 
				var s = 1, t = 1;
				var json = {}, rows = [], footer = [];
				
				$.each(data, function(i, item){
					var org = item.org_name,  month = item.imonth;
					if(!orglist.contains(org)){
						orglist.push(org);
						orgid[org] = s;
						center_to_org[org] = {};
						s++;
					};
					
					//对日期定义id主要用于定义不同月份field名字
					if(!monthlist.contains(month)){  
						monthlist.push(month);
						monthid[month] = t;
						t++;
					}  
				});
		

					var len = (orglist.length).toString().length;
					
					$.each(data, function(i, item){
						var org = item.org_name, center = item.center;
						var pid = orgid[org], id = 0;
						if(!center_to_org.hasOwnProperty(org)){
							id = Math.pow(10, len)*pid+1;
							center_to_org[org] = {};
							center_to_org[org][center] = id;
						
						}else{
							if(!center_to_org[org].hasOwnProperty(center)){
								id = Object.getOwnPropertyNames(center_to_org[org]).length + 1;
								center_to_org[org][center] = id;
							};
						}
					})
					

				//动态添加列
				var row1 = ["<th field = 'name' rowspan = '3' width = '130px' align = 'center'>名称</th>"], row2 = [], row3 = [];
				for(var key in monthid){
					var month = key, id = monthid[key];
					row1.push("<th colspan = '9' align = 'center'>"+key+"</th>");
					row2.push("<th colspan = '3' align = 'center'>网点</th><th colspan = '3' align = 'center'>承包区</th><th colspan = '3' align = 'center'>门店</th>");
					row3.push("<th field = 'site_c"+id+"' width = '30px'><span>月前数量</span></th><th field = 'site_a"+id+"' width = '30px'><span>本月新增</span></th><th field = 'site_r"+id+"' width = '30px'><span>完成率</span></th><th field = 'cbq_c"+id+"' width = '30px'><span>月前数量</span></th><th field = 'cbq_a"+id+"' width = '30px'><span>本月新增</span></th><th field = 'cbq_r"+id+"' width = '30px'><span>完成率</span></th><th field = 'store_c"+id+"' width = '30px'><span>月前数量</span></th><th field = 'store_a"+id+"' width = '30px'><span>本月新增</span></th><th field = 'store_r"+id+"' width = '30px'><span>完成率</span></th>");

				};
				row1.push("<th colspan = '6' align = 'center'>累计</th>");
				row2.push("<th colspan = '2' align = 'center'>网点</th><th colspan = '2' align = 'center'>承包区</th><th colspan = '2' align = 'center'>门店</th>");
				row3.push("<th field = 'site_a' width = '30px'>本月新增</th><th field = 'site_r' width = '30px'>完成率</th><th field = 'cbq_a' width = '30px'>本月新增</th><th field = 'cbq_r' width = '30px'>完成率</th><th field = 'store_a' width = '30px'>本月新增</th><th field = 'store_r' width = '30px'>完成率</th>");
				
				$$("row1").innerHTML = row1.join("\n");
				$$("row2").innerHTML = row2.join("\n");
				$$("row3").innerHTML = row3.join("\n");
				
				
				//在rows中添加数据
				var rec = {}, rec1 = {}, cen = {}, cen1 = {}, all = {}, all1 = {};
				var type = ["site", "cbq", "store"]
				
				for(var t = 0; t < type.length; t++){
					eval("all['"+type[t]+"_a'] = 0");
					eval("all1['"+type[t]+"_t'] = 0");
					eval("all['"+type[t]+"_c'] = 0");
				};
				
				for(var n in monthid){
					for(var t = 0; t < type.length; t++){
						eval("all['"+type[t]+"_a" + monthid[n] +"'] = 0");
						eval("all1['"+type[t]+"_t" + monthid[n] +"'] = 0");
						eval("all['"+type[t]+"_c" + monthid[n] +"'] = 0");
					}
				};
				
				for(var key1 in center_to_org){
					cen[key1] = {};
					cen1[key1] = {};
					for(var n in monthid){
						for(var t = 0; t < type.length; t++){
							eval("cen[key1]['"+type[t]+"_a" + monthid[n] +"'] = 0");
							eval("cen1[key1]['"+type[t]+"_t" + monthid[n] +"'] = 0");
							eval("cen[key1]['"+type[t]+"_c" + monthid[n] +"'] = 0");
						}
					}
				};
				
				$.each(data, function(i, item){
					var org = item.org_name, center = item.center, month = item.imonth;
					var len = Object.keys(center_to_org[org]).length.toString().length;
					
					if(!rec.hasOwnProperty(center)){
						rec[center] = {};
						rec1[center] = {};
						rec[center].id = orgid[org]*Math.pow(10, len)+center_to_org[org][center];
						rec[center].name = center;
						rec[center]._parentId = orgid[org];
						for(var t = 0; t < type.length; t++){
							eval("rec[center]."+type[t]+"_a = 0");
							eval("rec1[center]."+type[t]+"_t = 0");
						};
					}
						
					for(var t = 0; t < type.length; t++){
						eval("rec[center]."+type[t]+"_c"+monthid[month]+"=item."+type[t]+" - item."+type[t]+"_a");
						eval("rec[center]."+type[t]+"_a"+monthid[month]+"=item."+type[t]+"_a");
						eval("rec[center]."+type[t]+"_r"+monthid[month]+"=rate_cal(item."+type[t]+"_a, item."+type[t]+"_t)");
						//分拨横向累计
						eval("rec[center]."+type[t]+"_a += item."+type[t]+"_a");
						eval("rec1[center]."+type[t]+"_t += item."+type[t]+"_t");
						//分拨纵向累加
						eval("cen[org]."+type[t]+"_c"+monthid[month]+"+=item."+type[t]+" - item."+type[t]+"_a");
						eval("cen[org]."+type[t]+"_a"+monthid[month]+"+=item."+type[t]+"_a");
						eval("cen1[org]."+type[t]+"_t"+monthid[month]+"+=item."+type[t]+"_t")
					}
				});
				
				//分拨横向完成比计算
				for(var i in rec){
					for(var t = 0; t < type.length; t++){
					eval("rec[i]."+type[t]+"_r = rate_cal(rec[i]."+type[t]+"_a, rec1[i]."+type[t]+"_t)");
					}
					rows.push(rec[i]);
				}
				
				
				for(var i in cen){
					cen[i].id = orgid[i];
					cen[i].name = i;
					//cen[i].state = "closed";
					//分公司纵向累加
					for(var j in monthid){
						var mon = monthid[j];
						for(var t = 0; t < type.length; t++){
							eval("all."+type[t]+"_c"+mon+"+=cen[i]."+type[t]+"_c"+mon);
							eval("all."+type[t]+"_a"+mon+"+=cen[i]."+type[t]+"_a"+mon);
							eval("all1."+type[t]+"_t"+mon+"+=cen1[i]."+type[t]+"_t"+mon);
						}
					}
					cen[i].site_r = rate_cal(cen[i].site_a, cen1[i].site_t);
					cen[i].cbq_r = rate_cal(cen[i].cbq_a, cen1[i].cbq_t);
					cen[i].store_r = rate_cal(cen[i].store_a, cen1[i].store_t);
					rows.push(cen[i]);
				}

			for(var t = 0; t < type.length; t++){
				for(var j in monthid){
					var mon = monthid[j];
					//分公司横向完成比计算
					eval("all."+type[t]+"_r"+mon+"=rate_cal(all."+type[t]+"_a"+mon+", all1."+type[t]+"_t"+mon+")");
					eval("all."+type[t]+"_a+=all."+type[t]+"_a"+mon);
					eval("all1."+type[t]+"_t+=all1."+type[t]+"_t"+mon);
				}
				
				eval("all."+type[t]+"_r = rate_cal(all."+type[t]+"_a, all1."+type[t]+"_t)");
			};
			
			all.name = "合计";
			footer.push(all);
			json["rows"] = rows;
			json["footer"] = footer;
			json["total"] = rows.length;
			
			$("#rate").treegrid({
				height: 900,
				treeField: "name",
				idField: "id",
				showFooter: true,
				data: json
			});

		};
		
		
		function  combosel(){
			var orglist = [], centerlist = [];
			if(params.param2 == '-1'){
				orglist = [{"id": "-1", "org": "全网", "selected": true}];
				centerlist = [{"id": "-1", "center": "全部", "selected": true}];
				for(var key1 in orgid){
					orglist.push({"id": orgid[key1], "org": key1});
				}	
			}else{
				orglist = [{"id": orgid[params.param2], "org": params.param2, selected: "true"}];
				if(params.param3 == "-1"){
					centerlist = [{"id": "全部", "center": "全部", "selected": true}];
				}
				
				for(var key in center_to_org[params.param2]){
					if(key != params.param3){
						centerlist.push({"id": key, "center": key});
					}else{
						centerlist.push({"id": key, "center": key, "selected": true});
					}
				};
			};
				
			$("#org").combobox({
				valueField: "id",
				textField: "org",	
				data: orglist,
				onSelect: function(rec){
					var centerlist = [{"id": "全部", "center": "全部", "selected": true}];
					if(rec.id != "-1"){
						for(var key in center_to_org[rec.org]){
							centerlist.push({"id": key, "center": key});
						}
					};
					$("#center").combobox("loadData", centerlist);
				}
			});
			
			$("#center").combobox({
				valueField: "id",
				textField: "center",
				data: centerlist
			});
				
		}
		
		//对比中的comobox和datebox
		function sel(){
			var orglist = [];
			if(params.param2 == "-1"){
				orglist = [{"id": "-1", "org": "全网", "selected": true}];
				for(var key1 in orgid){
					orglist.push({"id": orgid[key1], "org": key1});
				};	
			}else{
				orglist = [{"id": orgid[params.param2], "org": params.param2, selected: "true"}];
			};
			
			$("#org1").combobox({
				valueField: "id",
				textField: "org",
				data: orglist
			});
			
			
			$("#mon").datebox({
			onShowPanel: function () {//显示日趋选择对象后再触发弹出月份层的事件，初始化时没有生成月份层
			span.trigger('click'); //触发click事件弹出月份层
			if (!tds) setTimeout(function () {//延时触发获取月份对象，因为上面的事件触发和对象生成有时间间隔
				tds = p.find('div.calendar-menu-month-inner td');
				tds.click(function (e) {
					e.stopPropagation(); //禁止冒泡执行easyui给月份绑定的事件
					var year = /\d{4}/.exec(span.html())[0]//得到年份
					, month = parseInt($(this).attr('abbr'), 10) + 1; //月份
					$('#mon').datebox('hidePanel')//隐藏日期对象
					.datebox('setValue', year+'-'+(month<10?('0'+month):month)); //设置日期的值
				});
			}, 0)
            },
            parser: function (s) {//配置parser，返回选择的日期
                if (!s) return new Date();
                var arr = s.split('-');
                return new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, 1);
            },
            formatter: function (d) { 
				return d.getFullYear()+'-'+(d.getMonth()<10?('0'+d.getMonth()):d.getMonth()); 
				}//配置formatter，只返回年月
			});
			
			var p = $('#mon').datebox('panel'), //日期选择对象
            tds = false, //日期选择对象中月份
            span = p.find('span.calendar-text'); //显示月份层的触发控件
			
			var d = params.param1.split("-");
			var y = d[0];
			var m = parseInt(d[1])+1;
			$("#mon").datebox("setValue", y+"-"+m);
			
		}
		
		
		//数量统计	
		function amount_Analysis(data){
			var dataObj = {};
			var org = $("#org").combobox("getText");
			var center = $("#center").combobox("getText");
			if(org == "全网"){
				$.each(data, function(i, item){
				var month = item.imonth;
				if(!dataObj.hasOwnProperty(month)){
					dataObj[month] = {};
					dataObj[month]["site"] = item.site;
					dataObj[month]["cbq"] = item.cbq;
					dataObj[month]["store"] = item.store;
				}else{
					dataObj[month]["site"] += item.site;
					dataObj[month]["cbq"] += item.cbq;
					dataObj[month]["store"] += item.store
				}
				});	
			}else{
				if(center == "全部"){
					$.each(data, function(i, item){
					var month = item.imonth;
					if(item.org_name == org){
						if(!dataObj.hasOwnProperty(month)){
						dataObj[month] = {};
						dataObj[month]["site"] = item.site;
						dataObj[month]["cbq"] = item.cbq;
						dataObj[month]["store"] = item.store;
						}else{
							dataObj[month]["site"] += item.site;
							dataObj[month]["cbq"] += item.cbq;
							dataObj[month]["store"] += item.store
						}
					}
					});	
				}else{
					$.each(data, function(i, item){
						var month = item.imonth;
						if(item.org_name == org && item.center == center){
							if(!dataObj.hasOwnProperty(month)){
							dataObj[month] = {};
							dataObj[month]["site"] = item.site;
							dataObj[month]["cbq"] = item.cbq;
							dataObj[month]["store"] = item.store;
							dataObj[month]["site_a"] = item.site_a;
							}
						}
					});	
				};
			};
			
			var labels = [], data_s = [], data_c = [], data_a = [];
			for(var m in dataObj){
				data_s.push(dataObj[m]["site"]);
				data_c.push(dataObj[m]["cbq"]);
				data_a.push(dataObj[m]["store"]);
				labels.push(m);
			};
			return axisLimit(labels, data_a, data_s, data_c);
		}
		
		//完成率统计
		function rate_Analysis(data){
			var dataObj = {};
			var org = $("#org").combobox("getText");
			var center = $("#center").combobox("getText");
			if(org == "全网"){
				$.each(data, function(i, item){
					var month = item.imonth;
					if(!dataObj.hasOwnProperty(month)){
						dataObj[month] = {};
						dataObj[month]["site_a"] = item.site_a;
						dataObj[month]["cbq_a"] = item.cbq_a;
						dataObj[month]["store_a"] = item.store_a;
						dataObj[month]["site_t"] = item.site_t;
						dataObj[month]["cbq_t"] = item.cbq_t;
						dataObj[month]["store_t"] = item.store_t;
					}else{
						dataObj[month]["site_a"] += item.site_a;
						dataObj[month]["cbq_a"] += item.cbq_a;
						dataObj[month]["store_a"] += item.store_a;
						dataObj[month]["site_t"] += item.site_t;
						dataObj[month]["cbq_t"] += item.cbq_t;
						dataObj[month]["store_t"] += item.store_t;
					}
				});
			}else{
				if(center == "全部"){
					$.each(data, function(i, item){
						var month = item.imonth;
						if(item.org_name == org){
							if(!dataObj.hasOwnProperty(month)){
							dataObj[month] = {};
							dataObj[month]["site_a"] = item.site_a;
							dataObj[month]["cbq_a"] = item.cbq_a;
							dataObj[month]["store_a"] = item.store_a;
							dataObj[month]["site_t"] = item.site_t;
							dataObj[month]["cbq_t"] = item.cbq_t;
							dataObj[month]["store_t"] = item.store_t;
							}else{
								dataObj[month]["site_a"] += item.site_a;
								dataObj[month]["cbq_a"] += item.cbq_a;
								dataObj[month]["store_a"] += item.store_a;
								dataObj[month]["site_t"] += item.site_t;
								dataObj[month]["cbq_t"] += item.cbq_t;
								dataObj[month]["store_t"] += item.store_t;
							}
						}
					});
				}else{
					$.each(data, function(i, item){
						var month = item.imonth;
						if(item.org_name == org && item.center == center){
							if(!dataObj.hasOwnProperty(month)){
								dataObj[month] = {};
								dataObj[month]["site_a"] = item.site_a;
								dataObj[month]["cbq_a"] = item.cbq_a;
								dataObj[month]["store_a"] = item.store_a;
								dataObj[month]["site_t"] = item.site_t;
								dataObj[month]["cbq_t"] = item.cbq_t;
								dataObj[month]["store_t"] = item.store_t;
							};
						};
					});
						
				}
			}
			
			var data_s = [], data_c = [], data_a = [], labels = [];
			for(var n in dataObj){
				var rate_s = rate_cal(dataObj[n]["site_a"], dataObj[n]["site_t"]);
				var rate_c = rate_cal(dataObj[n]["cbq_a"], dataObj[n]["cbq_t"]);
				var rate_a = rate_cal(dataObj[n]["store_a"], dataObj[n]["store_t"]);
				if(rate_s != undefined || rate_c != undefined || rate_a != undefined){
					data_s.push(rate_s);
					data_c.push(rate_c);
					data_a.push(rate_a);
					labels.push(n)
				}
				
			};
			
			return axisLimit(labels, data_a, data_s, data_c);
			
		}
		
		//控制只显示最近12个月数据
		function axisLimit(labels, data_a, data_s, data_c){
			var len = labels.length;
			var new_labels = [], new_data_s = [], new_data_a = [], new_data_c = [];
			if(len < 12){
				new_labels = labels;
				new_data_s = data_s;
				new_data_a = data_a;
				new_data_c = data_c;
				for(var i = 0; i < 12- len; i++){
					new_labels.push("");
				}
			}else{
				for(var i = len-12; i < len; i++){
					new_labels.push(labels[i]);
					new_data_a.push(data_a[i]);
					new_data_s.push(data_s[i]);
					new_data_c.push(data_c[i]);
					
				}
			};
			return [new_labels, new_data_a, new_data_s, new_data_c];
		}

		function showCanvas(data){
			
			var func1 = amount_Analysis(data);
			var func2 = rate_Analysis(data);
			
			var myChart1 = echarts.init(document.getElementById("canvas1"));
			var option1 = {
				color: ["rgba(0,0,255,0.2)", "rgba(0,0,255,0.6)", "rgba(0,0,255,1)"],
				title: {
					text: ($("#center").combobox("getText")=="全部")?$("#org").combobox("getText")+"门店数量统计":$("#center").combobox("getText")+"门店数量统计" ,
					x: "center",
					y: "top"
				},
				xAxis: [{
					type: "category",
					axisLine: {
						lineStyle: {
							color: "#rgba(0,0,0,0.6)",
							width: 2
						}
					},
					data: func1[0]	
				}],
				yAxis: [{
					type: "value",
					splitNumber: 6,
					axisLine: {
						lineStyle: {
						color: "rgba(0,0,0,0.6)",
						width: 1
						}
					}

				}],
				tooltip: {
					trigger: "axis",
					axisPointer: {
						type: "shadow"
					}
				},
				legend: {
					show: true,
					x: "right",
					y: "top",
					data: ["门店", "网点", "承包区"]
				},
				series: [{
					name: "门店",
					type: "bar",
					barGap: 0,
					data: func1[1]
				},{
					name: "网点",
					type: "bar",
					barGap: 0,
					data: func1[2]
				},{
					name: "承包区",
					type: "bar",
					barGap: 0,
					data: func1[3]
				}]
			};
			
			myChart1.setOption(option1);
			
			var myChart2 = echarts.init(document.getElementById("canvas2"));
			var option2 = {
				color: ["rgba(0,0,255,0.1)", "rgba(0,0,255,0.4)", "rgba(0,0,255,1)"],
				title: {
					text: ($("#center").combobox("getText")=="全部")?$("#org").combobox("getText")+"门店完成率统计":$("#center").combobox("getText")+"门店完成率统计",
					x: "center",
					y: "top"
				},
				xAxis: [{
					type: "category",
					axisLine: {
						lineStyle: {
							color: "#rgba(0,0,0,0.6)",
							width: 2
						}
					},
					data: func2[0]	
				}],
				yAxis: [{
					type: "value",
					splitNumber: 6,
					axisLine: {
						lineStyle: {
						color: "rgba(0,0,0,0.6)",
						width: 1
						}
					}
				}],
				tooltip: {
					trigger: "axis",
					axisPointer: {
						type: "shadow",
						
					}
				},
				legend: {
					show: true,
					x: "right",
					y: "top",
					data: ["门店", "网点", "承包区"]
				},
				series: [{
					name: "门店",
					type: "bar",
					barGap: 0,
					data: func2[1]
				},{
					name: "网点",
					type: "bar",
					barGap: 0,
					data: func2[2]
				},{
					name: "承包区",
					type: "bar",
					barGap: 0,
					data: func2[3]
				}]
			}
			
			myChart2.setOption(option2);
			
		};
		
		//按月份筛选数据
		function amount_Analysis1(data){
			var mon = $("#mon").datebox("getValue");
			var org = $("#org1").combobox("getText");
			var dataObj = {};
			if(org == "全网"){
				dataObj = {"全网": {"site": 0, "cbq": 0}};
				$.each(data, function(i, item){
					if(item.imonth == mon){
						dataObj["全网"]["site"] += item.site;
						dataObj["全网"]["cbq"] += item.cbq;
						if(!dataObj.hasOwnProperty(item.org_name)){
							dataObj[item.org_name] = {};
							dataObj[item.org_name]["site"] = item.site;
							dataObj[item.org_name]["cbq"] = item.cbq;
							dataObj[item.org_name]["belong"] = item.organization;
						}else{
							dataObj[item.org_name]["site"] += item.site;
							dataObj[item.org_name]["cbq"] += item.cbq;
						}
					}
				});
			}else{
				dataObj[org] = {};
				dataObj[org]["site"] =  0;
				dataObj[org]["cbq"] =  0;
				$.each(data, function(i, item){
					if(item.imonth == mon && item.org_name == org){
						dataObj[org]["site"] += item.site;
						dataObj[org]["cbq"] += item.cbq;
						dataObj[item.center] = {};
						dataObj[item.center]["site"] = item.site;
						dataObj[item.center]["cbq"] = item.cbq;
					}
				})
			}
			
			var label1 = [], label2 = [], data_s = [], data_c = [];
			for(var key in dataObj){
				if(!dataObj[key].hasOwnProperty("belong")){
					label2.push("");
				}else{
					label2.push(dataObj[key]["belong"]);	
				}
				label1.push(key);
				data_s.push(dataObj[key]["site"]);
				data_c.push(dataObj[key]["cbq"]);
			}
			return [label1, label2, data_s, data_c];
		};
		
		function showCanvas2(data){
			
			var myChart3 = echarts.init(document.getElementById("canvas3"));
			var func3 = amount_Analysis1(data);
			
			var option3 = {
				color: ["rgba(0,0,255,0.6)", "rgba(0,0,255,1)"],
				title: {
					text: $("#mon").datebox("getValue") + $("#org1").combobox("getText") + "门店数量统计" ,
					x: "center",
					y: "top"
				},
				xAxis: [{
					type: "category",
					axisLine: {
						lineStyle: {
							color: "#rgba(0,0,0,0.6)",
							width: 2
						}
					},
					data: func3[0]	
				}],
				yAxis: [{
					type: "value",
					splitNumber: 6,
					axisLine: {
						lineStyle: {
						color: "rgba(0,0,0,0.6)",
						width: 1
						}
					}

				}],
				tooltip: {
					trigger: "axis",
					axisPointer: {
						type: "shadow"
					}
				},
				legend: {
					show: true,
					x: "right",
					y: "top",
					data: ["网点", "承包区"]
				},
				series: [{
					name: "网点",
					type: "bar",
					stack: "门店",
					data: func3[2]
				},{
					name: "承包区",
					type: "bar",
					stack: "门店",
					data: func3[3]
				}]
			};
		
			myChart3.setOption(option3);
					
				
		};
			
		</script>
	<head>
	<body>
		<div id = "wrapper">
			<!--<input  class = "easyui-combox" name = "org" id = "org" style = "width: 100px"/>
			<input  class = "easyui-combox" name = "center" id = "center" style = "width: 100px"/> -->
			<div class = "easyui-tabs" style = "width: auto; height: 650px">
			<!--
				<div class = "easyui-layout" title = "概况" style = "width: auto; height: 600px">
					<form>
					<span>分公司：</span>
					<input  class = "easyui-combox" name = "org" id = "org" style = "width: 100px"/>
					<span>分拨：</span>
					<input  class = "easyui-combox" name = "center" id = "center" style = "width: 100px"/>
					<input 	class = "easyui-linkbutton" id = "sbt" style = "width: 50px; height: 25px" value = "确定" onclick = "showCanvas(data)"/>
					</form>
					<div id = "canvas1" data-options = "region: 'north', split: true" style = "height: 300px"></div>
					<div id = "canvas2" data-options = "region: 'center', split: true" style = "height: 300px"></div>
				</div>-->
				<div class = "easyui-layout" title = "对比" style = "width: auto; height: 600px">
					<form>
					<span>月份：</span>
					<input  class = "easyui-datebox" name = "mon" id = "mon" style = "width: 100px"/>
					<span>分公司：</span>
					<input  class = "easyui-combox" name = "org" id = "org1" style = "width: 100px"/>
					<input 	class = "easyui-linkbutton" id = "sbt1" style = "width: 50px; height: 25px" value = "确定" onclick = "showCanvas1(data)"/>
					</form>
					<div id = "canvas3" data-options = "region: 'north', split: true" style = "width: auto; height: 300px"></div>
					<div id = "canvas4" data-options = "region: 'center', split: true" style = "width: auto; height: 300px"></div>
				</div>
				<div title = "明细">
					<table id = "rate">
						<thead>
								<tr id = "row1"></tr>
								<tr id = "row2"></tr>
								<tr id= "row3"></tr>
						</thead>
					</table>
				</div>
			</div>
		</div>
	</body>
</html>